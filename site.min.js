document.addEventListener("DOMContentLoaded",function(){loadStyle(),getPlayerData().then(b=>updateContent(b)).catch(b=>console.log(b)),document.getElementById("lightlink").addEventListener("click",setLightMode,!0),document.getElementById("darklink").addEventListener("click",setDarkMode,!0)},!1);async function getPlayerData(){let b=await fetch("/api/list");if(200==b.status){let c=await b.json();return c}throw new Error(b.status)}function updateContent(b){setTitle(b),createPlayersTable(b)}function setTitle(b){title=document.getElementById("title"),table=document.getElementById("playerlist").getElementsByTagName("tbody")[0],title.innerText=`[NoPixel] Current Players: ${b.currentPlayers} / 32 | Queue: ${b.currentQueue}`}function createPlayersTable(b){b.players=b.players.sort((c,d)=>c.id>d.id?1:d.id>c.id?-1:0),b.players.forEach(function(b,c){newRow=table.insertRow(table.rows.length),newCell=newRow.insertCell(0),newText=document.createTextNode(`${c+1}`),newCell.appendChild(newText),newCell=newRow.insertCell(1),newText=document.createTextNode(`${b.id}`),newCell.appendChild(newText),newCell=newRow.insertCell(2),a=document.createElement("a"),a.setAttribute("href",`https://steamcommunity.com/profiles/${b.identifiers[2]}`),a.innerHTML=b.name,newCell.appendChild(a),newCell=newRow.insertCell(3),a=document.createElement("a"),a.setAttribute("href",`http://www.nopixel.net/upload/index.php?members/${b.identifiers[4]}`),a.innerHTML=b.identifiers[0],newCell.appendChild(a),newCell=newRow.insertCell(4),newText=document.createTextNode(`${b.identifiers[1]}`),newCell.appendChild(newText),newCell=newRow.insertCell(5),newText=document.createTextNode(`${b.identifiers[2]}`),newCell.appendChild(newText),newCell=newRow.insertCell(6),newText=document.createTextNode(`${b.ping}`),newCell.appendChild(newText)})}function loadStyle(){style=localStorage.getItem("style"),"dark"===style&&(link=document.createElement("link"),link.href="https://unpkg.com/bulmaswatch/darkly/bulmaswatch.min.css",link.type="text/css",link.id="darkmode",link.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(link)),link=document.createElement("link"),link.href="site.css",link.type="text/css",link.id="sitestyle",link.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(link)}function setDarkMode(b){b.preventDefault(),darkmode=document.getElementById("darkmode");darkmode||(localStorage.setItem("style","dark"),loadStyle())}function setLightMode(b){b.preventDefault(),localStorage.removeItem("style"),darkmode=document.getElementById("darkmode"),darkmode&&(darkmode.disabled=!0,darkmode.parentNode.removeChild(darkmode),darkmode=document.getElementById("sitestyle"),darkmode.disabled=!0,darkmode.parentNode.removeChild(darkmode)),loadStyle()}